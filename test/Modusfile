# create basic image and install git
base_image("gen") :-
  from("ubuntu:14.04"),
  run("apt-get update && apt-get install -y git").
  
base_image("cer") :-
  from("ubuntu"),
  run("apt-get update && apt-get install -y git").

# install wget
install_wget :-
  run("apt-get install -y wget").

# install python and pip
install_python :-
  run("apt-get install -y python3 python-pip").
 
from_wget :- 
  from("cvisionai/wget").
  

copy_patchprocess("gen") :-
  copy("./f1x-genprog-icse12", "/").

copy_patchprocess("cer") :-
  copy("./cerberus", "/").
  
prepare("gen") :-
  run("./bootstrap_installDependency.sh"),
  run("./bootstrap_CMake.sh"),
  run("./bootstrap_f1x.sh"),
  run("./bootstrap_prophet.sh").

prepare("cer") :-
  run("").
  
patch2(target) :-
  base_image(target),
  install_wget,
  install_python,
  copy_patchprocess(target),
  prepare(target).
  


